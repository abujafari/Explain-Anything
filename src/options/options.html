<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Explain Anything - Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
        </svg>
        <h1>Explain Anything</h1>
      </div>
      <p class="subtitle">Configure your AI explanation assistant</p>
    </header>

    <main class="main">
      <!-- Language Section -->
      <section class="section">
        <h2 class="section-title">
          <svg viewBox="0 0 24 24"><path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
          Response Language
        </h2>
        <div class="field">
          <label for="language">Select the language for AI responses:</label>
          <select id="language" class="select">
            <option value="English">English</option>
            <option value="Spanish">Spanish (Español)</option>
            <option value="French">French (Français)</option>
            <option value="German">German (Deutsch)</option>
            <option value="Italian">Italian (Italiano)</option>
            <option value="Portuguese">Portuguese (Português)</option>
            <option value="Russian">Russian (Русский)</option>
            <option value="Chinese">Chinese (中文)</option>
            <option value="Japanese">Japanese (日本語)</option>
            <option value="Korean">Korean (한국어)</option>
            <option value="Arabic">Arabic (العربية)</option>
            <option value="Hindi">Hindi (हिन्दी)</option>
            <option value="Dutch">Dutch (Nederlands)</option>
            <option value="Polish">Polish (Polski)</option>
            <option value="Turkish">Turkish (Türkçe)</option>
            <option value="Persian">Persian (فارسی)</option>
          </select>
        </div>
      </section>

      <!-- Provider Section -->
      <section class="section">
        <h2 class="section-title">
          <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
          LLM Provider
        </h2>
        <div class="provider-grid">
          <label class="provider-card">
            <input type="radio" name="provider" value="openrouter">
            <div class="provider-content">
              <div class="provider-icon openrouter-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
              </div>
              <div class="provider-info">
                <span class="provider-name">OpenRouter</span>
                <span class="provider-desc">Multiple providers • Pay per use</span>
              </div>
            </div>
          </label>

          <label class="provider-card">
            <input type="radio" name="provider" value="gemini">
            <div class="provider-content">
              <div class="provider-icon gemini-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
              </div>
              <div class="provider-info">
                <span class="provider-name">Gemini</span>
                <span class="provider-desc">Google AI • Free tier</span>
              </div>
            </div>
          </label>
        </div>

        <!-- OpenRouter API Key -->
        <div id="openrouterApiKeySection" class="api-key-section hidden">
          <div class="field">
            <label for="openrouterApiKey">OpenRouter API Key:</label>
            <div class="input-group">
              <input type="password" id="openrouterApiKey" class="input" placeholder="sk-or-...">
              <button type="button" class="btn btn-icon toggle-api-key" data-target="openrouterApiKey" title="Show/Hide">
                <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </button>
            </div>
            <p class="help-text">Get your API key from <a href="https://openrouter.ai/keys" target="_blank">openrouter.ai/keys</a></p>
          </div>
        </div>

        <!-- Gemini API Key -->
        <div id="geminiApiKeySection" class="api-key-section hidden">
          <div class="field">
            <label for="geminiApiKey">Gemini API Key:</label>
            <div class="input-group">
              <input type="password" id="geminiApiKey" class="input" placeholder="AIza...">
              <button type="button" class="btn btn-icon toggle-api-key" data-target="geminiApiKey" title="Show/Hide">
                <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </button>
            </div>
            <p class="help-text">Get a free API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">aistudio.google.com/app/apikey</a></p>
          </div>
        </div>

        <!-- Connection Test -->
        <div class="field">
          <button type="button" id="testConnection" class="btn btn-secondary">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
            Test Connection
          </button>
          <div id="connectionStatus" class="connection-status hidden"></div>
        </div>
      </section>

      <!-- Model Section -->
      <section class="section">
        <h2 class="section-title">
          <svg viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>
          AI Model
        </h2>

        <!-- Model Selector Controls -->
        <div class="model-controls">
          <div class="model-search-box">
            <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            <input type="text" id="modelSearch" class="input" placeholder="Search models...">
          </div>

          <div class="model-filters">
            <label class="filter-chip">
              <input type="checkbox" id="filterFree">
              <span>Free only</span>
            </label>

            <select id="sortModels" class="select select-small">
              <option value="default">Default sort</option>
              <option value="name">Name (A-Z)</option>
              <option value="price-low">Price (Low to High)</option>
              <option value="price-high">Price (High to Low)</option>
              <option value="context">Context Length</option>
            </select>

            <button type="button" id="refreshModels" class="btn btn-icon" title="Refresh models">
              <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
          </div>
        </div>

        <!-- Model Stats -->
        <div id="modelStats" class="model-stats"></div>

        <!-- Model List -->
        <div id="modelList" class="model-list">
          <div class="model-loading">
            <div class="loading-spinner"></div>
            <span>Loading models...</span>
          </div>
        </div>

        <!-- Selected Model Display -->
        <div id="selectedModel" class="selected-model hidden">
          <span class="selected-label">Selected:</span>
          <span id="selectedModelName" class="selected-name"></span>
          <span id="selectedModelPrice" class="selected-price"></span>
        </div>
        <input type="hidden" id="model" value="">
      </section>

      <!-- System Prompt Section -->
      <section class="section">
        <h2 class="section-title">
          <svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
          System Prompt
        </h2>
        <div class="field">
          <label for="systemPrompt">Customize how the AI responds:</label>
          <textarea id="systemPrompt" class="textarea" rows="6" placeholder="Enter instructions for how the AI should respond..."></textarea>
          <p class="help-text">This prompt tells the AI how to format and style its explanations.</p>
        </div>
        <button type="button" id="resetPrompt" class="btn btn-text">
          <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
          Reset to Default
        </button>
      </section>
    </main>

    <!-- Save Button -->
    <footer class="footer">
      <div id="saveStatus" class="save-status hidden"></div>
      <button type="button" id="saveSettings" class="btn btn-primary">
        <svg viewBox="0 0 24 24"><path d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></svg>
        Save Settings
      </button>
    </footer>
  </div>

  <script src="options.js"></script>
</body>
</html>
